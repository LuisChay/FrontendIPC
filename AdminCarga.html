<!doctype html>
<html lang="es">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">


    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">

<style>

*, *:after, *:before {
  box-sizing:border-box;
  -moz-box-sizing:border-box;
  -webkit-box-sizing:border-box;
}
.blue {
  background: #2abdfc;
  color: #fff;
}
.navbar {
  padding: 10px 10%;
}
#logo {
  display: inline-block;
  margin-top: 7px;
  color: #fff;
}
#link {
  color: #fff;
  font-weight: bold;
  margin: 0 10px;
}
i { margin: 0 7px; }
#sidebarCollapse {
  color: #fff;
  background: transparent;
  outline: none;
  margin: 0 0px;
}
#sidebarCollapse:hover {
  color: #2abdfc;
  background: #fff;
  outline: none;
}
.wrapper {
  display: flex;
  width: 100%;
  align-items: stretch;
}.wrapper {
  display: flex;
  width: 100%;
  align-items: stretch;
}#sidebar {
    min-width: 250px;
    max-width: 250px;
    margin-top: 0px;
    background: #6a76f8;
    color: #fff;
    transition: all 0.3s;
}
#sidebar.active{
	margin-left: -250px;
}

#sidebar .sidebar-header{
	padding: 20px;
	background: #6a76f8;
}
#sidebar ul.components{
	padding: 20px 0px;
}

#sidebar ul p{
	padding: 10px;
	font-size: 1.1em;
	display: block;
}

#sidebar ul li a{
	padding: 10px 10px 10px 20px;
	font-size: 1.1em;
	display: block;
    color: #fff;
    font-weight: bold;
}
#sidebar ul li a:hover {
    color: #6240bd;
    background: #fff;
    text-decoration: none;
}

#sidebar ul li.active>a,
a[aria-expanded="true"] {
    color: #fff;
    background: #8a5fff;
}
a[data-toggle="collapse"] {
    position: relative;
}
.dropdown-toggle::after {
    display: block;
    position: absolute;
    top: 50%;
    right: 20px;
    transform: translateY(-50%);
}

#content {
    width: 100%;
    padding: 40px;
    min-height: 100vh;
    transition: all 0.3s;
    margin-top: 70px;
}
@media (max-width:800px) {
  #sidebar {
    margin-left: -250px;}
  #sidebar.active{
	margin-left: 0px;
  }
  #sidebarCollapse span{
	display: none;
  }
  .card {
    width:100%;
  }
}
@media (max-width:400px) {
  #sidebar {
    margin-top: -20px;
  }
  #logo {
    display: none;
  }
}


  /* Style the tab */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

/* Style the buttons that are used to open the tab content */
.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
}

/* Change background color of buttons on hover */
.tab button:hover {
  background-color: #ddd;
}

/* Create an active/current tablink class */
.tab button.active {
  background-color: #ccc;
}

/* Style the tab content */
.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}
</style>

    <title>Admin</title>
    
  <script src="js/jspdf.min.js"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <script src="papaparse.min.js"></script>
 

  </script>

  
  </head>
  <body>

    <div class="wrapper fixed-left">
      <nav id="sidebar">
        <div class="sidebar-header">



          
          <h3><i class=""></i>Abner Cardona</h3>
        </div>
  
        <ul class="list-unstyled components">
       
          <li>
            <a href="Login.html"><i class=""></i>Cerrar sesion</a>
          </li>
        </ul>
      </nav>
  
      <div id="content">
        <div style="width: 100%; padding-right: 25px;">
        
                      <!-- Tab links -->
        <div class="tab">
          <button class="tablinks" onclick="openTab(event, 'Doctores')">Doctores</button>
          <button class="tablinks" onclick="openTab(event, 'Enfermeras')">Enfermeras</button>
          <button class="tablinks" onclick="openTab(event, 'Pacientes')">Pacientes</button>
          <button class="tablinks" onclick="openTab(event, 'Medicamentos')">Medicamentos</button>
         
        
        </div>
        
        <!-- Tab content -->
        <div id="Doctores" class="tabcontent">
          <h3>Doctores</h3>
        
          <form class="form-inline">
            <div class="form-group">
              <label for="files">Cargar archivo CSV (Asegurate que tu archivo CSV no contenga lineas en blanco):</label>
              <input type="file" id="files"  class="form-control" accept=".csv" required />
              </div>
              <div class="form-group" align="Right">
                <button type="submit" id="submit-file-doctor" style="width: 150px;" class="btn btn-primary">Cargar Archivo</button>
                <button type="submit" onclick="cargartablaDoc()" style="width: 150px;" class="btn btn-secondary">Ver tabla</button>
              </div>
             <div id="tabladocs"; style="width: 100%; padding-right: 25px; float: right;">
              <table class="table table-striped" id="datostabdoc">
                  <thead>
                      <tr class="table-dark">
                          <th> Nombre </th>
                          <th> Apellido </th>
                          <th> Fecha </th>
                          <th> Sexo </th>
                          <th> Usuario </th>
                          <th> Contraseña </th>
                          <th> Especialidad </th>
                          <th> Telefono </th>
                          <th > Acciones </th>
                      </tr>
                  </thead>
                  <tbody id="detalles"></tbody>
              </table>
            </div>
        
        
        
            <div class="form-group" align="Right">
              <button type="submit" onclick="imPDF()" style="width: 150px;" class="btn btn-secondary">Imprimir Tabla</button>
            </div>
          </form>
           <div class="row"
              
            <div class="row" id="parsed_csv_list">
          </div>
        </div>
        
        
        
        
        <div id="Enfermeras" class="tabcontent">
          <h3>Enfermeras</h3>
          
        
          <form class="form-inline">
        
            <div class="form-group">
              <label for="files">Cargar archivo CSV (Asegurate que tu archivo CSV no contenga lineas en blanco):</label>
              <input type="file" id="filesenf"  class="form-control" accept=".csv" required />
              </div>
              <div class="form-group" align="Right">
             <button type="submit" id="submit-file-enfermera" style="width: 150px;" class="btn btn-primary">Cargar Archivo</button>
             <button type="submit" onclick="cargartablaEnf()" style="width: 150px;" class="btn btn-secondary">Ver tabla</button>
             </div>
        
             <div id="tablaenf", style="width: 100%; padding-right: 25px; float: right;">
              <table class="table table-striped" id="datostabenfe">
                  <thead>
                      <tr class="table-dark">
                          <th> Nombre </th>
                          <th> Apellido </th>
                          <th> Fecha </th>
                          <th> Sexo </th>
                          <th> Usuario </th>
                          <th> Contraseña </th>
                          <th> Telefono </th>
                          <th> Acciones </th>
                      </tr>
                  </thead>
                  <tbody id="detalles1"></tbody>
              </table>
            </div>
        
            <div class="form-group" align="Right">
            
            <button type="submit" onclick="imPDFenf()" style="width: 150px;" class="btn btn-secondary">Imprimir Tabla</button>
            </div>
          </form>
        
          
          
        
          <div class="row"
              
          <div class="row" id="parsed_csv_list1">
            </div>
        </div>
        
        
        
        
        <div id="Pacientes" class="tabcontent">
          <h3>Pacientes</h3>
          
        
          <form class="form-inline">
            <div class="form-group">
              <label for="files">Cargar archivo CSV (Asegurate que tu archivo CSV no contenga lineas en blanco):</label>
              <input type="file" id="filespac"  class="form-control" accept=".csv" required />
            </div>
            <div class="form-group" align="Right">
             <button type="submit" id="submit-file-paciente" style="width: 150px;" class="btn btn-primary">Cargar Archivo</button>
             <button type="submit" onclick="cargartablaPac()" style="width: 150px;" class="btn btn-secondary">Ver tabla</button>
             </div>
        
             <div id="tablapac" style="width: 100%; padding-right: 25px; float: right;">
              <table class="table table-striped" id="datostabpac">
                  <thead>
                      <tr class="table-dark">
                          <th> Nombre </th>
                          <th> Apellido </th>
                          <th> Fecha </th>
                          <th> Sexo </th>
                          <th> Usuario </th>
                          <th> Contraseña </th>
                          <th> Telefono </th>
                          <th> Acciones </th>
                      </tr>
                  </thead>
                 
                  <tbody id="detalles2"></tbody>
              </table>
          </div>
        
        
          
         
          <div class="form-group" align="Right">
            
            <button type="submit" onclick="imPDFpac()" style="width: 150px;" class="btn btn-secondary">Imprimir Tabla</button>
            </div>
          </form>
        
        <div class="row"
              
        <div class="row" id="parsed_csv_list">
        </div>
        
        </form>
        
        
        
        </div>
        <div id="Medicamentos" class="tabcontent">
          <h3>Medicamentos</h3>
          
        
          <form class="form-inline">
            <div class="form-group">
              <label for="files">Cargar archivo CSV (Asegurate que tu archivo CSV no contenga lineas en blanco):</label>
              <input type="file" id="filesmed"  class="form-control" accept=".csv" required />
            </div>
            <div class="form-group" align="Right">
             <button type="submit" id="submit-file-medicamento" style="width: 150px;" class="btn btn-primary">Cargar Archivo</button>
             <button type="submit" onclick="cargartablaMedi()" style="width: 150px;" class="btn btn-secondary">Ver tabla</button>
             </div>
        
             <div style="width: 100%; padding-right: 25px; float: right;">
              <table class="table table-striped" id="datostabmedic">
                  <thead>
                      <tr class="table-dark">
                          <th> Nombre </th>
                          <th> Precio </th>
                          <th> Descripcion </th>
                          <th> Cantidad </th>
                          <th> Acciones </th>
                      </tr>
                  </thead>
             
                  <tbody id="detalles3"></tbody>
              </table>
            </div>
            <div class="form-group" align="Right">
            
              <button type="submit" onclick="imPDFmed()" style="width: 150px;" class="btn btn-secondary">Imprimir Tabla</button>
              </div>
            </form>
            
        
        
          <div class="row"
              
          <div class="row" id="parsed_csv_list">
          </div>
        </div>
        
        
        
        
        </form>
        
      </div>
      <div>
       
       







<script>
function openTab(evt, cityName) {
  // Declare all variables
  var i, tabcontent, tablinks;

  // Get all elements with class="tabcontent" and hide them
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Get all elements with class="tablinks" and remove the class "active"
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  // Show the current tab, and add an "active" class to the button that opened the tab
  document.getElementById(cityName).style.display = "block";
  evt.currentTarget.className += " active";
}



</script>

 <!--DOCTORES-->

<script type="text/javascript">
  $(document).ready(function(){
    $('#submit-file-doctor').on("click",function(e){
     
		event.preventDefault();
		$('#files').parse({
			config: {
				delimiter: "auto",
				complete: displayHTMLTable,
			},
			before: function(file, inputElem)
			{
			},
			error: function(err, file)
			{
			},
			complete: function()
			{
			}
		});
    });
	
	  function displayHTMLTable(results){
		  var table = "<table class='table'>";
		  var data = results.data;
	

      for(i=1;i<data.length;i++){
			
			  var row = data[i];
			  var cells = row.join(",").split(",");


        var nombre = cells[0];
        var apellido = cells[1];
        var fecha = cells[2];
        var sexo = cells[3];
        var usuario = cells[4];
        var contraseña = cells[5];
        var especialidad = cells[6];
        var telefono = cells[7];

        var objeto = {
            'nombredoc': nombre,
            'apellidodoc': apellido,
            'fechadoc': fecha,
            'sexodoc': sexo,
            'usuariodoc': usuario,
            'contradoc': contraseña,
            'especialidaddoc': especialidad,
            'telefonodoc': telefono,
        }
        console.log(objeto)
        
              
        fetch('https://backend-202000343.herokuapp.com/Doctores', {
            method: 'POST',
            body: JSON.stringify(objeto),
           
            headers:{
              'Content-Type': 'application/json',
              'Access-Control-Allow-Origin': '*',}})
        .then(res => res.json())
        .catch(err => {
                console.error('Error:', err)
                alert("Ocurrio un error, ver la consola")
        })
        .then(response =>{
          console.log(response);
             
        })   

      }
      alert("El archivo se cargó satisfactoriamente") 
     
             
  }  
});


function cargartablaDoc(){
  event.preventDefault();
  var tabla = document.querySelector('#detalles')

var cadena = ''


fetch('https://backend-202000343.herokuapp.com/Doctores', {
method: 'GET',
headers:{
    'Content-Type': 'application/json',
    'Access-Control-Allow-Origin': '*',}})
.then(res => res.json())
.catch(err => {
    console.error('Error:', err)
    alert("Ocurrio un error, ver la consola")
})
.then(response =>{
    console.log(response);
   
    response.forEach(element => {
   
        console.log(element)
       
        cadena += `<tr>
            <td> ${element.Nombre} </td>
            <td> ${element.Apellido} </td>
            <td> ${element.Fecha} </td>
            <td> ${element.Sexo} </td>
            <td> ${element.Usuario} </td>
            <td> ${element.Contrasena} </td>
            <td> ${element.Telefono} </td>
            <td> ${element.Especialidad} </td>
            <td> 
              <button value=${element.Usuario} onclick="EditarDoc(this)" type="button" class="btn btn-primary"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></button> 
              <button value=${element.Nombre} onclick="BorrarDoc(this)" type="button" class="btn btn-danger"><i class="fa fa-trash-o" aria-hidden="true"></i></button> 
            </td>
            </tr>`         

    });

    tabla.innerHTML = cadena
})
}

function EditarDoc(boton){
            var usuariodoc = boton.value        
            sessionStorage.setItem("buscardoc", usuariodoc)
            location.href="ModificaDoc.html"
        }

</script>

<script>

function BorrarDoc(boton){

var nombre  = boton.value
          
          fetch(`https://backend-202000343.herokuapp.com/Doctores/${nombre}`, {
          method: 'DELETE',
          headers:{
              'Content-Type': 'application/json',
              'Access-Control-Allow-Origin': '*',}})
          .then(res => res.json())
          .catch(err => {
              console.error('Error:', err)
              alert("Ocurrio un error, ver la consola")
          })
          .then(response =>{
              console.log(response);
              Regresar()
              alert(response.Mensaje)

          })
}

function Regresar(){
            location.href = "AdminCarga.html"
        }

      

</script>
  

<script>

var arr = []
function imPDF(){
 
 var doc = new jsPDF({
    orientation: 'portrait'
});

doc.setFontSize(24);
doc.text(60, 20, 'Datos de Doctores');
doc.setFontSize(12);
doc.text(20, 30, 'Datos personales de los doctores.');
doc.rect(8, 35, 193, 10, 'FD');
doc.setTextColor(255, 255, 255);
doc.text(10, 40, '  Nombre         Apellido                  Fecha         Sexo     Usuario              Telefono       Especialidad'); 
doc.setTextColor(0, 0, 0);
var linea = 50

var suma = 0

const tableReg = document.getElementById('datostabdoc');

let total = 0;


for (let i = 1; i < tableReg.rows.length; i++) {

    let found = false;

    const cellsOfRow = tableReg.rows[i].getElementsByTagName('td');


    for (let j = 0; j < cellsOfRow.length && !found; j++) {

        const compareWith = cellsOfRow[j].innerHTML.toLowerCase();
        const nomx = cellsOfRow[0].innerHTML.toLowerCase();
        const apex = cellsOfRow[1].innerHTML.toLowerCase();
        const fecx = cellsOfRow[2].innerHTML.toLowerCase();
        const sexx = cellsOfRow[3].innerHTML.toUpperCase();
        const usux = cellsOfRow[4].innerHTML.toLowerCase();
        
        const telx = cellsOfRow[7].innerHTML.toLowerCase();
        const espx = cellsOfRow[6].innerHTML.toLowerCase();
        
        doc.text(10, linea, nomx);
        doc.text(40, linea, apex);
        doc.text(70, linea, fecx);
        doc.text(95, linea, sexx);
        doc.text(105, linea, usux);
        
        doc.text(140, linea, telx);
        doc.text(170, linea, espx);
        
        linea += 5
            found = true;

            total++;
    }

    if (found) {

        tableReg.rows[i].style.display = '';

    } else {
        tableReg.rows[i].style.display = 'none';

    }

}

const lastTR=tableReg.rows[tableReg.rows.length-1];

const td=lastTR.querySelector("td");

lastTR.classList.remove("hide", "red");
var searchText 


linea += 10
doc.rect(8, 35, 193, linea-35);

doc.save('Datosdoctores.pdf');
}


</script>



 <!-- FIN DOCTORES-->

<!--ENFERMERAS -->
        <script type="text/javascript">
          $(document).ready(function(){
            $('#submit-file-enfermera').on("click",function(e){
             
            event.preventDefault();

            $('#filesenf').parse({
              config: {
                delimiter: "auto",
                complete: displayHTMLTable,
              },
              before: function(file, inputElem)
              {
              },
              error: function(err, file)
              {
              },
              complete: function()
              {
              }
            });
            });
          
            function displayHTMLTable(results){
              var table = "<table class='table'>";
              var data = results.data;
          
        
              for(i=1;i<data.length;i++){
              
                var row = data[i];
                var cells = row.join(",").split(",");
        
        
          var nombre = cells[0];
          var apellido = cells[1];
          var fecha = cells[2];
          var sexo = cells[3];
          var usuario = cells[4];
          var contraseña = cells[5];
          var telefono = cells[6];
  
          var objeto = {
              'nombreenf': nombre,
              'apellidoenf': apellido,
              'fechaenf': fecha,
              'sexoenf': sexo,
              'usuarioenf': usuario,
              'contraenf': contraseña,
              'telefonoenf': telefono,

          }

               
          console.log(objeto)
          
                
          fetch('https://backend-202000343.herokuapp.com/Enfermeras', {
              method: 'POST',
              body: JSON.stringify(objeto),
             
              headers:{
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*',}})
          .then(res => res.json())
          .catch(err => {
                  console.error('Error:', err)
                  alert("Ocurrio un error de enfermeras en la lectura, ver la consola")
          })
          .then(response =>{
            console.log(response);
               
          })   
  
        }
        alert("El archivo se cargó satisfactoriamente") 
       
    }  
  });
  
  
  function cargartablaEnf(){
    event.preventDefault();
    var tabla = document.querySelector('#detalles1')
  
  var cadena = ''
  
  
  fetch('https://backend-202000343.herokuapp.com/Enfermeras', {
  method: 'GET',
  headers:{
      'Content-Type': 'application/json',
      'Access-Control-Allow-Origin': '*',}})
  .then(res => res.json())
  .catch(err => {
      console.error('Error:', err)
      alert("Ocurrio un error enfermera carga tabla, ver la consola")
  })
  .then(response =>{
      console.log(response);
     
      response.forEach(element => {
     
          console.log(element)
         
          cadena += `<tr>
              <td> ${element.Nombre} </td>
              <td> ${element.Apellido} </td>
              <td> ${element.Fecha} </td>
              <td> ${element.Sexo} </td>
              <td> ${element.Usuario} </td>
              <td> ${element.Contrasena} </td>
              <td> ${element.Telefono} </td>
              <td> 
                <button value=${element.Usuario} onclick="EditarEnfe(this)" type="button" class="btn btn-primary"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></button> 
                <button value=${element.Nombre} onclick="BorrarEnfe(this)" type="button" class="btn btn-danger"><i class="fa fa-trash-o" aria-hidden="true"></i></button> 
              </td>
              </tr>`         
  
      });
  
      tabla.innerHTML = cadena
  })
  }
  
  function EditarEnfe(boton){
              var usuarioenf = boton.value
              sessionStorage.setItem("buscarenf", usuarioenf)
              location.href="ModificaEnfe.html"
          }
  </script>
  
  <script>
  
  function BorrarEnfe(boton){
  
  var nombre  = boton.value
            
            fetch(`https://backend-202000343.herokuapp.com/Enfermeras/${nombre}`, {
            method: 'DELETE',
            headers:{
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*',}})
            .then(res => res.json())
            .catch(err => {
                console.error('Error:', err)
                alert("Ocurrio un error, ver la consola")
            })
            .then(response =>{
                console.log(response);
                RegresarEnf()
                alert(response.Mensaje)
  
            })
  }
  
  function RegresarEnf(){
              location.href = "AdminCarga.html"
          }
   
  </script>
    
  
  <script>
  
  
  var arr = []
  function imPDFenf(){
   
   var doc = new jsPDF({
      orientation: 'portrait'
  });
  
  doc.setFontSize(24);
  doc.text(60, 20, 'Datos de Enfermeras');
  doc.setFontSize(12);
  doc.text(20, 30, 'Datos personales de las Enfermeras.');
  doc.rect(8, 35, 193, 10, 'FD');
  doc.setTextColor(255, 255, 255);
  doc.text(10, 40, '  Nombre         Apellido                  Fecha         Sexo     Usuario              Telefono   '); 
  doc.setTextColor(0, 0, 0);
  var linea = 50
  
  var suma = 0
  
  const tableReg = document.getElementById('datostabenfe');
    
  let total = 0;
  
  
  for (let i = 1; i < tableReg.rows.length; i++) {
  
  
  
      let found = false;
  
      const cellsOfRow = tableReg.rows[i].getElementsByTagName('td');
  
    
      for (let j = 0; j < cellsOfRow.length && !found; j++) {
  
          const compareWith = cellsOfRow[j].innerHTML.toLowerCase();
          const nomx1 = cellsOfRow[0].innerHTML.toLowerCase();
          const apex1 = cellsOfRow[1].innerHTML.toLowerCase();
          const fecx1 = cellsOfRow[2].innerHTML.toLowerCase();
          const sexx1 = cellsOfRow[3].innerHTML.toUpperCase();
          const usux1 = cellsOfRow[4].innerHTML.toLowerCase(); 
          const telx1 = cellsOfRow[6].innerHTML.toLowerCase();
          
          doc.text(10, linea, nomx1);
          doc.text(40, linea, apex1);
          doc.text(70, linea, fecx1);
          doc.text(95, linea, sexx1);
          doc.text(105, linea, usux1);
          doc.text(140, linea, telx1);
          
          linea += 5
  
              found = true;
  
              total++;
  
          //}
  
      }
  
      if (found) {
  
          tableReg.rows[i].style.display = '';
  
      } else { 
          tableReg.rows[i].style.display = 'none';
  
      }
  
  }
  
  const lastTR=tableReg.rows[tableReg.rows.length-1];
  
  const td=lastTR.querySelector("td");
  
  lastTR.classList.remove("hide", "red");
  var searchText 
  
  
  linea += 10
  doc.rect(8, 35, 193, linea-35);
  

  doc.save('Datosenfermeras.pdf');
  }
  
  
  
  </script>
   <!--FIN ENFERMERAS-->




  <!-- PACIENTES-->

  <script type="text/javascript">
    $(document).ready(function(){
      $('#submit-file-paciente').on("click",function(e){
       
      event.preventDefault();

      $('#filespac').parse({
        config: {
          delimiter: "auto",
          complete: displayHTMLTable,
        },
        before: function(file, inputElem)
        {
        },
        error: function(err, file)
        {
          //console.log("ERROR:", err, );
        },
        complete: function()
        {
          //console.log("Done with all files");
        }
      });
      });
    
      function displayHTMLTable(results){
        var table = "<table class='table'>";
        var data = results.data;
    
  
        for(i=1;i<data.length;i++){
        
          var row = data[i];
          var cells = row.join(",").split(",");
  
  
    var nombre = cells[0];
    var apellido = cells[1];
    var fecha = cells[2];
    var sexo = cells[3];
    var usuario = cells[4];
    var contraseña = cells[5];
    var telefono = cells[6];

    var objeto = {
        'nombrepac': nombre,
        'apellidopac': apellido,
        'fechapac': fecha,
        'sexopac': sexo,
        'usuariopac': usuario,
        'contrapac': contraseña,
        'telefonopac': telefono,

    }

         
    console.log(objeto)
    
          
    fetch('https://backend-202000343.herokuapp.com/Pacientes', {
        method: 'POST',
        body: JSON.stringify(objeto),
       
        headers:{
          'Content-Type': 'application/json',
          'Access-Control-Allow-Origin': '*',}})
    .then(res => res.json())
    .catch(err => {
            console.error('Error:', err)
            alert("Ocurrio un error de pacientes en la lectura, ver la consola")
    })
    .then(response =>{
      console.log(response);
         
    })   
    // fin del fetch

  }
  alert("El archivo se cargó satisfactoriamente") 
 
         
}  
});


function cargartablaPac(){
event.preventDefault();
var tabla = document.querySelector('#detalles2')

var cadena = ''


fetch('https://backend-202000343.herokuapp.com/Pacientes', {
method: 'GET',
headers:{
'Content-Type': 'application/json',
'Access-Control-Allow-Origin': '*',}})
.then(res => res.json())
.catch(err => {
console.error('Error:', err)
alert("Ocurrio un error enfermera carga tabla, ver la consola")
})
.then(response =>{
console.log(response);

response.forEach(element => {

    console.log(element)
   
    cadena += `<tr>
        <td> ${element.Nombre} </td>
        <td> ${element.Apellido} </td>
        <td> ${element.Fecha} </td>
        <td> ${element.Sexo} </td>
        <td> ${element.Usuario} </td>
        <td> ${element.Contrasena} </td>
        <td> ${element.Telefono} </td>
        <td> 
          <button value=${element.Usuario} onclick="EditarPac(this)" type="button" class="btn btn-primary"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></button> 
          <button value=${element.Nombre} onclick="BorrarPac(this)" type="button" class="btn btn-danger"><i class="fa fa-trash-o" aria-hidden="true"></i></button> 
        </td>
        </tr>`         

});

tabla.innerHTML = cadena
})
}

function EditarPac(boton){
        var usuariopacie = boton.value
        sessionStorage.setItem("buscarpaci", usuariopacie)
        location.href="ModificarPac.html"
    }

</script>

<script>

function BorrarPac(boton){

var nombre  = boton.value
      
      fetch(`https://backend-202000343.herokuapp.com/Pacientes/${nombre}`, {
      method: 'DELETE',
      headers:{
          'Content-Type': 'application/json',
          'Access-Control-Allow-Origin': '*',}})
      .then(res => res.json())
      .catch(err => {
          console.error('Error:', err)
          alert("Ocurrio un error, ver la consola")
      })
      .then(response =>{
          console.log(response);
          RegresarEnf()
          alert(response.Mensaje)

      })



}

function RegresarEnf(){
        location.href = "AdminCarga.html"
    }

  

</script>


<script>


var arr = []
function imPDFpac(){

var doc = new jsPDF({
orientation: 'portrait'
});

doc.setFontSize(24);
doc.text(60, 20, 'Datos de Pacientes');
doc.setFontSize(12);
doc.text(20, 30, 'Datos personales de los Pacientes.');
doc.rect(8, 35, 193, 10, 'FD');
doc.setTextColor(255, 255, 255);
doc.text(10, 40, '  Nombre         Apellido                  Fecha         Sexo     Usuario              Telefono   '); 
doc.setTextColor(0, 0, 0);
var linea = 50



var suma = 0

const tableReg = document.getElementById('datostabpac');


let total = 0;


for (let i = 1; i < tableReg.rows.length; i++) {



let found = false;

const cellsOfRow = tableReg.rows[i].getElementsByTagName('td');


for (let j = 0; j < cellsOfRow.length && !found; j++) {

    const compareWith = cellsOfRow[j].innerHTML.toLowerCase();
    const nomx2 = cellsOfRow[0].innerHTML.toLowerCase();
    const apex2 = cellsOfRow[1].innerHTML.toLowerCase();
    const fecx2 = cellsOfRow[2].innerHTML.toLowerCase();
    const sexx2 = cellsOfRow[3].innerHTML.toUpperCase();
    const usux2 = cellsOfRow[4].innerHTML.toLowerCase(); 
    const telx2 = cellsOfRow[6].innerHTML.toLowerCase();
    
    doc.text(10, linea, nomx2);
    doc.text(40, linea, apex2);
    doc.text(70, linea, fecx2);
    doc.text(95, linea, sexx2);
    doc.text(105, linea, usux2);
    doc.text(140, linea, telx2);
    
    linea += 5



        found = true;

        total++;


}

if (found) {

    tableReg.rows[i].style.display = '';

} else {


    tableReg.rows[i].style.display = 'none';

}

}

const lastTR=tableReg.rows[tableReg.rows.length-1];

const td=lastTR.querySelector("td");

lastTR.classList.remove("hide", "red");
var searchText 

linea += 10
doc.rect(8, 35, 193, linea-35);

doc.save('DatosPacientes.pdf');
}



</script>


  <!--FIN PACIENTES-->


  
  <!--MEDICAMENTOS-->

  <script type="text/javascript">
    $(document).ready(function(){
      $('#submit-file-medicamento').on("click",function(e){
       
      event.preventDefault();

      $('#filesmed').parse({
        config: {
          delimiter: "auto",
          complete: displayHTMLTable,
        },
        before: function(file, inputElem)
        {
        },
        error: function(err, file)
        {

        },
        complete: function()
        {

        }
      });
      });
    
      function displayHTMLTable(results){
        var table = "<table class='table'>";
        var data = results.data;
    
  
        for(i=1;i<data.length;i++){
        
          var row = data[i];
          var cells = row.join(",").split(",");
  
  
    var nombre = cells[0];
    var precio = cells[1];
    var descripcion = cells[2];
    var cantidad = cells[3];
    

    var objeto = {
        'nombremed': nombre,
        'preciomed': precio,
        'descripcionmed': descripcion,
        'cantidadmed': cantidad,
        
    }

         
    console.log(objeto)
    
          
    fetch('https://backend-202000343.herokuapp.com/Medicamentos', {
        method: 'POST',
        body: JSON.stringify(objeto),
       
        headers:{
          'Content-Type': 'application/json',
          'Access-Control-Allow-Origin': '*',}})
    .then(res => res.json())
    .catch(err => {
            console.error('Error:', err)
            alert("Ocurrio un error de pacientes en la lectura, ver la consola")
    })
    .then(response =>{
      console.log(response);
         
    })   
    // fin del fetch

  }
  alert("El archivo se cargó satisfactoriamente") 
 
         
}  
});


function cargartablaMedi(){
  
event.preventDefault();
var tabla = document.querySelector('#detalles3')

var cadena = ''


fetch('https://backend-202000343.herokuapp.com/Medicamentos', {
method: 'GET',
headers:{
'Content-Type': 'application/json',
'Access-Control-Allow-Origin': '*',}})
.then(res => res.json())
.catch(err => {
console.error('Error:', err)
alert("Ocurrio un error enfermera carga tabla, ver la consola")
})
.then(response =>{
console.log(response);

response.forEach(element => {

    console.log(element)
   
    cadena += `<tr>
        <td> ${element.Nombre} </td>
        <td> ${element.Precio} </td>
        <td> ${element.Descripcion} </td>
        <td> ${element.Cantidad} </td>
        <td> 
          <button value=${element.Nombre} onclick="EditarMedi(this)" type="button" class="btn btn-primary"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></button> 
          <button value=${element.Nombre} onclick="BorrarMedi(this)" type="button" class="btn btn-danger"><i class="fa fa-trash-o" aria-hidden="true"></i></button> 
        </td>
        </tr>`         

});

tabla.innerHTML = cadena
})
}

function EditarMedi(boton){
        var medicina = boton.value
        sessionStorage.setItem("buscar3", medicina)
        location.href="ModificarMed.html"
    }

</script>

<script>

function BorrarMedi(boton){

var nombre  = boton.value
      
      fetch(`https://backend-202000343.herokuapp.com/Medicamentos/${nombre}`, {
      method: 'DELETE',
      headers:{
          'Content-Type': 'application/json',
          'Access-Control-Allow-Origin': '*',}})
      .then(res => res.json())
      .catch(err => {
          console.error('Error:', err)
          alert("Ocurrio un error, ver la consola")
      })
      .then(response =>{
          console.log(response);
          RegresarMed()
          alert(response.Mensaje)

      })
}

function RegresarMed(){
        location.href = "AdminCarga.html"
    }

  

</script>


<script>


var arr = []

function imPDFmed(){

  var doc = new jsPDF({
orientation: 'portrait'
});

doc.setFontSize(24);
doc.text(60, 20, 'Datos de los Medicamentos');
doc.setFontSize(12);
doc.text(20, 30, 'Informacion de cada medicamento.');
doc.rect(8, 35, 193, 10, 'FD');
doc.setTextColor(255, 255, 255);
doc.text(10, 40, '  Nombre         Precio                  Descricpcion                                Cantidad   '); 
doc.setTextColor(0, 0, 0);
var linea = 50

var suma = 0


const tableReg = document.getElementById('datostabmedic');

let total = 0;

for (let i = 1; i < tableReg.rows.length; i++) {

let found = false;

const cellsOfRow = tableReg.rows[i].getElementsByTagName('td');


for (let j = 0; j < cellsOfRow.length && !found; j++) {

    const compareWith = cellsOfRow[j].innerHTML.toLowerCase();
    const nomm2 = cellsOfRow[0].innerHTML.toLowerCase();
    const prec2 = cellsOfRow[1].innerHTML.toLowerCase();
    const desc2 = cellsOfRow[2].innerHTML.toLowerCase();
    const cant2 = cellsOfRow[3].innerHTML.toUpperCase();

    
    doc.text(10, linea, nomm2);
    doc.text(40, linea, prec2);
    doc.text(70, linea, desc2);
    doc.text(135, linea, cant2);
    
    linea += 5

        found = true;

        total++;


}

if (found) {

    tableReg.rows[i].style.display = '';

} else {

    tableReg.rows[i].style.display = 'none';
}
}


const lastTR=tableReg.rows[tableReg.rows.length-1];

const td=lastTR.querySelector("td");

lastTR.classList.remove("hide", "red");
var searchText 



linea += 10
doc.rect(8, 35, 193, linea-35);
doc.save('DatosMedicamentos.pdf');
}



</script>



  <!--FIN MEDICAMENTOS-->


    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
    -->

  </body>
  </html>
